<!DOCTYPE html>
<html>
<head>
	<meta 	charset="utf-8">
	<title>Qcanvas</title>
	<script src="js/jquery.js"></script>
	<link href="style/default.min.css" rel="stylesheet">
	<script src="js/highlight.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	<style>
		
		html,body{
			font-size: 14px;

		}

		pre {
    position: relative;
    border-radius: 3px;
    border: 1px solid #C3CCD0;
    background: #FFF;
    overflow: hidden;
}

code {
  display: block;
  padding: 12px 24px;
  overflow-y: auto;
  font-weight: 300;
  font-family: Menlo, monospace;
  font-size: 0.8em;
}

code.has-numbering {
    margin-left: 21px;
}

.pre-numbering {
    position: absolute;
    top: 0;
    left: 0;
    width: 20px;
    padding: 12px 2px 12px 0;
    border-right: 1px solid #C3CCD0;
    border-radius: 3px 0 0 3px;
    background-color: #EEE;
    text-align: right;
    font-family: Menlo, monospace;
    font-size: 0.8em;
    color: #AAA;
}
	.frm,.frm iframe{
		overflow: hidden;
	}

	.frm{
		display: none;
	}

	a{
		background: #fff
	}

	</style>
</head>
<body>

	Qcanvas框架用法示例
	 <!-- <a href="game.html" target="_blank">小游戏正在开发中...</a> -->
	<hr>
	1、初始化
	   <pre><code class="js">
var qcanvas = new Qcanvas(["qcanvas",300,200]);


		</code>

		<a onclick="document.getElementById('frm1').style.display='block'">查看示例</a>
	</pre>
	<div class="frm" id="frm1">
		<iframe src="template1.html" width="100%" height="200" frameborder="0"></iframe>
	</div>

	2、画线
	<pre><code class="js">
var line1 = qcanvas.qline.line({
	start:[0,80],
	end:[50,50],
	color:'red',
	like:'-',
	withText:'动画'
});
var line2 = qcanvas.qline.line({
	start:[0,20],
	end:[150,50],
	color:'blue',
	like:'--',
	withText:'line2'
});
var line3 = qcanvas.qline.line({
	start:[30,50],
	end:[150,60],
	width:1,
	like:'->',
	color:'gray',
	withText:'line3'
});		

var line4 = qcanvas.qline.line({
	start:[100,123],
	end:[150,180],
	width:1,
	like:'-->',
	color:'gray',
	withText:'line4',
	withTextAlign:'left'
});

		
		</code>
<a onclick="document.getElementById('frm2').style.display='block'">查看示例</a>

	</pre>

	<div class="frm" id="frm2">
		<iframe src="template2.html" width="100%" height="200" frameborder="0"></iframe>
	</div>
	3、画文字
	<pre>
		<code class="js">

var text = qcanvas.qtext.text({
	start:[100,100],
	color:'blue',
	fontSize:'20px'
})		
var textfps = qcanvas.qtext.text({
	start:[20,20],
		text:function(){ return qcanvas.currFps},
	color:'blue',
	fontSize:'20px'
})	
			
		</code>
<a onclick="document.getElementById('frm3').style.display='block'">查看示例</a>

	</pre>
<div class="frm" id="frm3">
		<iframe src="template3.html" width="100%" height="200" frameborder="0"></iframe>
	</div>
	4、画矩形
	<pre>
		<code class="js">
			
var rect = qcanvas.qrect.rect({
	start:[160,100],
	borderColor:'red',
	fillColor:'',
	degree:30,
	radius:5,
	mouseup:function(){
		console.log('mouseup')
	}
})		

var rect1 = qcanvas.qrect.rect({
	start:[180,80],
	width:200,
	borderColor:'green',
	fillColor:'blue',
	pointerEvent:'none',
	mouseup:function(){
		console.log('rect1->mouseup')
	}
})

		</code>
<a onclick="document.getElementById('frm4').style.display='block'">查看示例</a>

	</pre>

	<div class="frm" id="frm4">
		<iframe src="template4.html" width="100%" height="200" frameborder="0"></iframe>
	</div>

	5、画圆
	<pre>
		<code class="js">
			
var arc = qcanvas.qarc.arc({
	start:[100,100],
	sAngle:0,
	eAngle:360,
	fillColor:'#fff',
	opacity:0.2,
	r:20
});		

		</code>
<a onclick="document.getElementById('frm5').style.display='block'">查看示例</a>

	</pre>
	<div class="frm" id="frm5">
		<iframe src="template5.html" width="100%" height="200" frameborder="0"></iframe>
	</div>

	6、多边形
	<pre>
		<code class="js">
//正多边形
var polygon = qcanvas.qpolygon.polygon({
	r:30,
	num:6,
	start:[350,200]
})

//不规则图形

var shape = qcanvas.qshape.shape({
				fillColor:'#999',
				opacity:0.3,
				points:[
					[80,10],
					[80,50],
					[150,70],
					[160,20],
				]
			});

		</code>
<a onclick="document.getElementById('frm6').style.display='block'">查看示例</a>

	</pre>

	<div class="frm" id="frm6">
		<iframe src="template6.html" width="100%" height="200" frameborder="0"></iframe>
	</div>
	7、画图片
	<pre>
		<code class="js">
			
qcanvas.load({
	"b":"http://sandbox.runjs.cn/uploads/rs/475/t0qpfflr/hand.png"
},function(){ 
	var b = qcanvas.getSourceByName("b");
	
	
	qcanvas.qimg.img({
		img:b,
		sStart:[0,0],
		sWidth:b.width,
		sHeight:b.height,
		size:"cover",
		tStart:[100,0],
		tWidth:80,
		tHeight:70,
		mousemove:function(position){
			console.log(position);
		}
		
		
	});
	
	
});	

		</code>
<a onclick="document.getElementById('frm7').style.display='block'">查看示例</a>

	</pre>

	<div class="frm" id="frm7">
		<iframe src="template7.html" width="100%" height="200" frameborder="0"></iframe>
	</div>

	8、画精灵图
	<pre>
		<code class="js">
			
qcanvas.load({			
	"person":"http://sandbox.runjs.cn/uploads/rs/475/t0qpfflr/spirit.png"
},function(){
	
		var spiritSource = qcanvas.getSourceByName("person");
	
		qcanvas.qspirit.spirit({
			img:spiritSource,
			row:2,
			column:10,
			framesIndex:[0,0],
			tStart:[100,120],
			tWidth:50,
			tHeight:50,
			isLoop:true,
			during:1,
			mouseup:function(){
				console.log(this);
				console.log('触发mouseup事件');
			}
		})
			
				
})		

		</code>
<a onclick="document.getElementById('frm8').style.display='block'">查看示例</a>

	</pre>

	<div class="frm" id="frm8">
		<iframe src="template8.html" width="100%" height="200" frameborder="0"></iframe>
	</div>

	9、动画
	<pre>
		<code class="js">

var rect = qcanvas.qrect.rect({
	start:[0,10],
	borderColor:'red',
	fillColor:'blue',
	drag:false
})		

qcanvas.qanimation.animate(rect,{
	start:[0,10],
},{
	start:[200,10],
},2,true,'Back.easeInOut');
			

		</code>
<a onclick="document.getElementById('frm9').style.display='block'">查看示例</a>

	</pre>
	<div class="frm" id="frm9">
		<iframe src="template9.html" width="100%" height="200" frameborder="0"></iframe>
	</div>

	10、事件
	<pre>
		<code class="js"> 
		var rect = qcanvas.qrect.rect({
		start:[0,10],
		borderColor:'red',
		fillColor:'blue',
		drag:false,
		mouseup:function(){
			console.log('蓝色块mouseup事件');
			tip.innerHTML ='蓝色块mouseup事件'+parseInt(Math.random()*10)+'<br>'+tip.innerHTML;
		},
		mousedown:function(){
			console.log('蓝色块mousedown事件');
			tip.innerHTML ='蓝色块mousedown事件'+parseInt(Math.random()*10)+'<br>'+tip.innerHTML;
		},
		mousemove:function(){
			console.log('蓝色块mousemove事件');
			tip.innerHTML ='蓝色块mousemove事件'+parseInt(Math.random()*10)+'<br>'+tip.innerHTML;
		},
		mouseout:function(){
			console.log('蓝色块mouseout事件');
			tip.innerHTML ='蓝色块mouseout事件'+parseInt(Math.random()*10)+'<br>'+tip.innerHTML;
		}
	});
    

		


		</code>
	<a onclick="document.getElementById('frm10').style.display='block'">查看示例</a>
	</pre>


		<div class="frm" id="frm10">
		<iframe src="template10.html" width="100%" height="200" frameborder="0"></iframe>
	</div>
	11、显示元素、隐藏元素、删除元素
	<pre>
		<code class="js">
var rect;

var create = function(){
	rect = qcanvas.qrect.rect({
		start:[0,10],
		borderColor:'red',
		fillColor:'blue',
	})	

	createWord.setDisplay('none');	
}


	

qcanvas.qtext.text({
	start:[50,150],
	color:'blue',
	fontSize:'14px',
	text:'显示',
	drag:false,
	mouseup:function(){
		rect.setDisplay('block');

	}

})

qcanvas.qtext.text({
	start:[100,150],
	color:'blue',
	fontSize:'14px',
	text:'隐藏',
	drag:false,
	mouseup:function(){
		rect.setDisplay('none');

	}
})

qcanvas.qtext.text({
	start:[150,150],
	color:'blue',
	fontSize:'14px',
	text:'删除',
	drag:false,
	mouseup:function(){
		qcanvas.removeById(rect.id);

		createWord.setDisplay('block');
	}
})

var createWord = qcanvas.qtext.text({
	start:[200,150],
	color:'blue',
	fontSize:'14px',
	text:'创建',
	display:"none",
	drag:false,
	mouseup:function(){
		create();

	}
})

create();
			

		</code>
<a onclick="document.getElementById('frm11').style.display='block'">查看示例</a>
		
	</pre>

	<div class="frm" id="frm11">
		<iframe src="template11.html" width="100%" height="200" frameborder="0"></iframe>
	</div>


	12、元素层级调整 （lower，lowerToBottom，raise，raiseToTop）

	<pre>
		
		<code  class="js">

	var redRect = qcanvas.qrect.rect({
		start:[0,0],
		width:200,
		height:200,
		drag:false,
		borderColor:'red',
		fillColor:'red',
	})

	var greenRect = qcanvas.qrect.rect({
		start:[50,50],
		width:170,
		height:170,
		drag:false,

		borderColor:'green',
		fillColor:'green',
	})
	var blueRect = qcanvas.qrect.rect({
		start:[100,100],
		width:120,
		height:120,
		drag:false,
		borderColor:'blue',
		fillColor:'blue',
	})
 

	qcanvas.qtext.text({
		start:[200,40],
		text:'redRect上移一层',
		color:'blue',
		fontSize:'16px',
		drag:false,
		mouseup:function(pos){

			qcanvas.raise(redRect);
			

		}
	})

	qcanvas.qtext.text({
		start:[200,60],
		text:'redRect下移一层',
		color:'blue',
		fontSize:'16px',
		drag:false,
		mouseup:function(pos){

			qcanvas.lower(redRect);
			

		}
	})

	qcanvas.qtext.text({
		start:[200,80],
		text:'redRect置顶',
		color:'blue',
		fontSize:'16px',
		drag:false,
		mouseup:function(pos){

			qcanvas.raiseToTop(redRect);
			

		}
	})

	qcanvas.qtext.text({
		start:[200,100],
		text:'redRect置底',
		color:'yellow',
		fontSize:'16px',
		drag:false,
		mouseup:function(pos){

			qcanvas.lowerToBottom(redRect);
			

		}
	})
			

		</code>
<a onclick="document.getElementById('frm12').style.display='block'">查看示例</a>

	</pre>

	<div class="frm" id="frm12">
		<iframe src="template12.html" width="100%" height="350" frameborder="0"></iframe>
	</div>

	13、Qlayer元素容器类的使用及容器内元素层级调整<br><br>

实质上是一个**抽象**的元素容器类 为了容纳其它元素。（宽高和主画布一样）<br>
1、当我们不使用Qlayer时 元素直接画在主画布上；<br>
2、当使用Qlayer时 先创建一个临时的canvas画布 <br>把指定要放到该容器内的元素先画这个临时canvas上，最后在requestNextAnimationFrame的下一个循环时再把这个画布画到主画布上 当然临时canvas也在requestNextAnimationFrame控制下不停的重绘 所以现在框架实现的这些元素都可以指定到一个Qlayer对象上 <br>
3、使用Qlayer元素的好处：可以一次性控制一批元素的显示、隐藏、删除、层级关系等<br>
4、删除Qlayer元素 会同时删除它所容纳的所有元素<br>
5、在Qlayer里的所有元素层级关系都是基于该Qlayer实例的。<br>
Qcanvas的以下方法 对Qlayer元素容器内的元素无效 如果需要调整层级关系 需要调用Qlayer的相应方法<br>
|lower|把元素降低一个层级 (参数为元素对象) <br>
|lowerToBottom|把元素层级置底(参数为元素对象)<br>
|raise|把元素提高一个层级(参数为元素对象)<br>
|raiseToTop|把元素层级置顶(参数为元素对象)<br>

<pre>
		
		<code  class="js">
			var greenRect = qcanvas.qrect.rect({
		start:[0,0],
		width:200,
		height:200,
		// drag:false,
		borderColor:'green',
		fillColor:'green', 
	})

	var redRect = qcanvas.qrect.rect({
		start:[100,100],
		width:50,
		height:50,
		borderColor:'red',
		fillColor:'red', 
		// drag:false
	}) 

	var blueRect = qcanvas.qrect.rect({
		start:[120,140],
		width:50,
		height:50,
		borderColor:'blue',
		fillColor:'blue',
		// drag:false
	})

 




 


	//layer元素
	var layer = qcanvas.qlayer.layer();
	console.log(layer);

	layer.push(redRect);

	layer.push(blueRect);




	qcanvas.load({			
		"person":"img/spirit1.png",
	},function(){
		
			var spiritSource = qcanvas.getSourceByName("person"); 

			var s = qcanvas.qspirit.spirit({
				img:spiritSource,
				row:1,
				column:8,
				framesIndex:[0,0],
				tStart:[0,120],
				tWidth:40,
				tHeight:64,
				isLoop:true,
				during:1,
				mouseup:function(){
					console.log(this);
					console.log('触发mouseup事件');
				}
			})

			var t = qcanvas.qtext.text({
				start:s.tStart,
				text:'我是来自layer容器里spirit',
				color:'#000',
				pointerEvent:'none' 
			})
			


			layer.push(t);
			layer.push(s);
					
	})


	qcanvas.qtext.text({
		start:[200,20],
		text:'greenRect上移一层',
		drag:false,
		mouseup:function(){
			qcanvas.raise(greenRect);
		}
	})

	qcanvas.qtext.text({
		start:[200,40],
		text:'greenRect下移一层',
		drag:false,
		mouseup:function(){
			qcanvas.lower(greenRect);
		}
	})

	qcanvas.qtext.text({
		start:[200,60],
		text:'redRect上移一层',
		drag:false,
		mouseup:function(){
			layer.raise(redRect);
		}
	})
	qcanvas.qtext.text({
		start:[200,80],
		text:'redRect下移一层',
		drag:false,
		mouseup:function(){
			layer.lower(redRect);
		}
	})
	qcanvas.qtext.text({
		start:[200,100],
		text:'layer下移一层',
		drag:false,
		mouseup:function(){
			qcanvas.lower(layer);
		}
	})

	qcanvas.qtext.text({
		start:[200,120],
		text:'layer上移一层',
		drag:false,
		mouseup:function(){
			qcanvas.raise(layer);
		}
	})
		</code>
	<a onclick="document.getElementById('frm13').style.display='block'">查看示例</a>

	</pre>

	<div class="frm" id="frm13">
		<iframe src="template13.html" width="100%" height="350" frameborder="0"></iframe>
	</div>







<script>
$(function(){
    $('pre code').each(function(){
        var lines = $(this).text().split('\n').length - 1;
        var $numbering = $('<ul/>').addClass('pre-numbering');
        $(this)
            .addClass('has-numbering')
            .parent()
            .append($numbering);
        for(i=1;i<=lines;i++){
            $numbering.append($('<li/>').text(i));
        }
    });
});


</script>


</body>
</html>